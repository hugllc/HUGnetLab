<?xml version="1.0" encoding="UTF-8"?>
<!-- Generated by PHP Project Wizard (PPW) 1.0.4 on Mon Oct 3 15:21:39 CDT 2011 -->

<project name="package" default="build" basedir=".">
    <property name="pkg.source.view" value="${basedir}/view"/>
    <property name="pkg.source.lab" value="${basedir}/html"/>
    <property name="pkg.source.include" value="${basedir}/include"/>
    <property name="pkg.release" value="" />
    <property name="pkg.versionfile" value="${basedir}/include/VERSION.TXT" />
    <exec executable="grep" failonerror="true"
        outputproperty="pkg.version" errorproperty="pkg.versionerror">
        <arg line='-o -e "[0-9]\{1,\}\.[0-9]\{1,\}\.[0-9]\{1,\}[~alpharc0-9]\{0,\}" ${pkg.versionfile}'
            />
    </exec>
    <property name="pkg.buildname.lab" value="HUGnetLab-${pkg.version}${pkg.release}" />
    <property name="pkg.buildname.view" value="HUGnetView-${pkg.version}${pkg.release}" />
    <property name="pkg.staging" value="${basedir}/build/staging"/>
    <property name="pkg.builddir" value="${basedir}/rel" />
    <property name="pkg.buildtarget.lab" value="${pkg.builddir}/${pkg.buildname.lab}" />
    <property name="pkg.buildtarget.view" value="${pkg.builddir}/${pkg.buildname.view}" />

    <target name="clean" description="Clean up and create artifact directories">
        <delete dir="${pkg.staging}" failonerror="false"/>
        <delete failonerror="false">
            <fileset dir="${pkg.builddir}" includes="*.tar"/>
            <fileset dir="${pkg.builddir}" includes="*.tar.gz"/>
            <fileset dir="${pkg.builddir}" includes="*.tar."/>
        </delete>
    </target>

    <target name="setuplab" description="Copy all of the files to build the deb">
        <echo>Setting up for HUGnetLab 'v${pkg.version}'</echo>
        <mkdir dir="${pkg.staging}/lab/${pkg.buildname.lab}"/>
        <copy todir="${pkg.staging}/lab/${pkg.buildname.lab}/html">
            <fileset dir="${pkg.source.lab}"/>
        </copy>
        <mkdir dir="${pkg.staging}/lab/${pkg.buildname.lab}/include/HUGnetLab"/>
        <copy todir="${pkg.staging}/lab/${pkg.buildname.lab}/include/HUGnetLab">
            <fileset dir="${pkg.source.include}"/>
        </copy>
    </target>
    <target name="releaselab" description="build the release files">
        <mkdir dir="${pkg.builddir}"/>
        <tar destfile="${pkg.buildtarget.lab}.tar.gz"
            basedir="${pkg.staging}/lab" compression="gzip"/>
        <checksum file="${pkg.buildtarget.lab}.tar.gz" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.lab}.tar.gz" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
        <tar destfile="${pkg.buildtarget.lab}.tar.bz2"
            basedir="${pkg.staging}/lab" compression="bzip2"/>
        <checksum file="${pkg.buildtarget.lab}.tar.bz2" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.lab}.tar.bz2" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
        <zip destfile="${pkg.buildtarget.lab}.zip"
            basedir="${pkg.staging}/lab"/>
        <checksum file="${pkg.buildtarget.lab}.zip" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.lab}.zip" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
    </target>
    <target name="setupview" description="Copy all of the files to build the deb">
        <echo>Setting up for HUGnetView 'v${pkg.version}'</echo>
        <mkdir dir="${pkg.staging}/view/${pkg.buildname.view}"/>
        <copy todir="${pkg.staging}/view/${pkg.buildname.view}/html">
            <fileset dir="${pkg.source.view}"/>
        </copy>
        <mkdir dir="${pkg.staging}/view/${pkg.buildname.view}/include/HUGnetLab"/>
        <copy todir="${pkg.staging}/view/${pkg.buildname.view}/include/HUGnetLab">
            <fileset dir="${pkg.source.include}"/>
        </copy>
    </target>
    <target name="releaseview" description="build the release files">
        <mkdir dir="${pkg.builddir}"/>
        <tar destfile="${pkg.buildtarget.view}.tar.gz"
            basedir="${pkg.staging}/view" compression="gzip"/>
        <checksum file="${pkg.buildtarget.view}.tar.gz" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.view}.tar.gz" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
        <tar destfile="${pkg.buildtarget.view}.tar.bz2"
            basedir="${pkg.staging}/view" compression="bzip2"/>
        <checksum file="${pkg.buildtarget.view}.tar.bz2" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.view}.tar.bz2" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
        <zip destfile="${pkg.buildtarget.view}.zip"
            basedir="${pkg.staging}/view"/>
        <checksum file="${pkg.buildtarget.view}.zip" todir="${pkg.builddir}"
                        algorithm="sha1" format="MD5SUM"/>
        <checksum file="${pkg.buildtarget.view}.zip" todir="${pkg.builddir}"
                        algorithm="md5" format="MD5SUM"/>
    </target>
    <target name="postclean" description="build the deb">
        <delete dir="${pkg.staging}"/>
    </target>
    <target name="build" depends="clean,setuplab,releaselab,setupview,releaseview,postclean"/>
</project>
